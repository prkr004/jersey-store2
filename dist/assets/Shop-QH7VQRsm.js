import{u as h,j as e,s as b,M as P,r as x,p as y}from"./index-CwiwxR1t.js";import{c as M}from"./format-Dd0aQ-Sh.js";import{P as S}from"./ProductCard-C2wyyOQ1.js";import{u as C}from"./useProducts-COTeWHJF.js";import{g as k,P as g}from"./pricing-C7HRZ8N_.js";function w(){const[r,a]=h(),c=r.get("q")??"",d=r.get("sport")??"",l=1e3,n=3e3,m=Number(r.get("price")??n),o=(s,i)=>{const t=new URLSearchParams(r);i?t.set(s,i):t.delete(s),a(t,{replace:!0})},u=()=>{a(new URLSearchParams,{replace:!0})};return e.jsxs("div",{className:"rounded-2xl border border-slate-200/60 dark:border-slate-800 bg-white dark:bg-slate-900 p-4 flex flex-wrap items-center gap-3",children:[e.jsx("input",{value:c,onChange:s=>o("q",s.target.value),placeholder:"Search",className:"flex-1 rounded-xl bg-slate-100 dark:bg-slate-800 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-400"}),e.jsxs("select",{value:d,onChange:s=>o("sport",s.target.value),className:"rounded-xl bg-slate-100 dark:bg-slate-800 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brand-400",children:[e.jsx("option",{value:"",children:"All Sports"}),b.map(s=>e.jsx("option",{value:s,children:s},s))]}),null,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Max Price:"}),e.jsx("input",{type:"range",min:l,max:n,step:100,value:m,onChange:s=>o("price",s.target.value)}),e.jsx("span",{className:"text-sm font-medium",children:M(m)})]}),e.jsx(P,{variant:"outline",onClick:u,children:"Clear"})]})}function I(){const[r]=h(),a=(r.get("q")??"").toLowerCase(),c=r.get("sport")??"",d=Number(r.get("price")),l=d?Math.min(Math.max(d,g.MIN),g.MAX):1/0,{products:n,loading:m,error:o}=C(),u=n??y,s=x.useMemo(()=>u.map(t=>({...t,price:k(t.id)})),[u]),i=x.useMemo(()=>s.filter(t=>{const p=t.sport||"Football",f=a?[t.name,t.team,p].some(v=>v.toLowerCase().includes(a)):!0,j=c?p===c:!0,N=isFinite(l)?t.price<=l:!0;return f&&j&&N}),[a,c,l,s]);return e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsxs("div",{className:"flex items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-4xl",children:"Shop Jerseys"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Find your teamâ€™s colors with pro-grade quality."})]}),e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.length," results"]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(w,{})}),o&&e.jsxs("div",{className:"mt-4 text-sm text-red-600",children:["Failed to load live products: ",o]}),e.jsxs("div",{className:"mt-6 grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[m&&!n&&Array.from({length:8}).map((t,p)=>e.jsx("div",{className:"h-72 rounded-2xl bg-slate-200 dark:bg-slate-800 animate-pulse"},p)),i.map(t=>e.jsx(S,{product:t},t.id))]})]})}export{I as default};
