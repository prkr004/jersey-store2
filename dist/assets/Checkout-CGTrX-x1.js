import{d as y,n as j,e as f,h as N,r as c,j as e}from"./index-CEOidj1b.js";import{c as m}from"./format-Dd0aQ-Sh.js";import{U as v}from"./UPIPayment-Dd3L9fNj.js";function S(){const{total:i,detailed:d,clear:p}=y(),{placeOrder:x}=j(),{user:o}=f(),u=N(),[g,h]=c.useState(!1),[s,t]=c.useState({first:"",last:"",email:(o==null?void 0:o.email)||"",address:"",city:"",postalCode:""}),b=s.first&&s.last&&s.email&&s.address&&s.city&&s.postalCode&&d.length>0;return e.jsxs("div",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"font-display text-4xl",children:"Checkout"}),e.jsxs("div",{className:"mt-6 grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200/60 dark:border-slate-800 p-6",children:[e.jsx("h2",{className:"font-semibold mb-4",children:"Shipping Information"}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx("input",{placeholder:"First name",value:s.first,onChange:a=>t(r=>({...r,first:a.target.value})),className:"rounded-xl bg-slate-100 dark:bg-slate-900 px-4 py-2"}),e.jsx("input",{placeholder:"Last name",value:s.last,onChange:a=>t(r=>({...r,last:a.target.value})),className:"rounded-xl bg-slate-100 dark:bg-slate-900 px-4 py-2"}),e.jsx("input",{placeholder:"Email",type:"email",value:s.email,onChange:a=>t(r=>({...r,email:a.target.value})),className:"rounded-xl bg-slate-100 dark:bg-slate-900 px-4 py-2 sm:col-span-2"}),e.jsx("input",{placeholder:"Address",value:s.address,onChange:a=>t(r=>({...r,address:a.target.value})),className:"rounded-xl bg-slate-100 dark:bg-slate-900 px-4 py-2 sm:col-span-2"}),e.jsx("input",{placeholder:"City",value:s.city,onChange:a=>t(r=>({...r,city:a.target.value})),className:"rounded-xl bg-slate-100 dark:bg-slate-900 px-4 py-2"}),e.jsx("input",{placeholder:"Postal Code",value:s.postalCode,onChange:a=>t(r=>({...r,postalCode:a.target.value})),className:"rounded-xl bg-slate-100 dark:bg-slate-900 px-4 py-2"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200/60 dark:border-slate-800 p-6 space-y-6",children:[e.jsx("h2",{className:"font-semibold",children:"Payment"}),e.jsx(v,{amount:i,config:{payeeVPA:"merchant@upi",payeeName:"JerseyX Store",note:"Order Payment"},onSimulateSuccess:()=>{const a=`${s.first||""} ${s.last||""}`.trim()||"Guest",r=x({items:d,method:"UPI",shipping:{name:a,email:s.email||"guest@example.com",address:s.address||"—",city:s.city||"—",postalCode:s.postalCode||"—"}});h(!0),p();const n=new Date;n.setDate(n.getDate()+(Math.random()<.5?3:5)),u("/order/confirmation",{replace:!0,state:{status:"success",order:{id:r.id,items:r.items.map(l=>({name:l.name,qty:l.qty,price:l.price,size:l.size})),total:r.totals.total,eta:n.toLocaleDateString()}}})}}),!b&&e.jsx("div",{className:"rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 p-3 text-xs text-amber-700 dark:text-amber-300",children:"Tip: Fill shipping details for a more complete receipt. Your order will still be recorded for this session."}),g&&e.jsxs("div",{className:"rounded-xl bg-green-50 dark:bg-green-900/30 border border-green-300/50 dark:border-green-700 p-4 text-sm text-green-700 dark:text-green-300",children:[e.jsx("p",{className:"font-medium",children:"Payment Recorded"}),e.jsx("p",{className:"mt-1",children:"Thank you! Your order is being processed. A confirmation email would be sent in a real deployment."})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200/60 dark:border-slate-800 p-6 h-fit",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Order Summary"}),e.jsx("div",{className:"mt-4 space-y-3",children:d.map(a=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[a.product.name," × ",a.qty]}),e.jsx("span",{children:m(a.product.price*a.qty)})]},`${a.id}-${a.size}`))}),e.jsxs("div",{className:"mt-3 border-t border-slate-200/60 dark:border-slate-800 pt-3 flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:m(i)})]})]})]})]})}export{S as default};
